# 实验最终获取obj文件：Tju-3D-Vision-Tasks\task5\final_fitted_smpl.obj

---

### 🖼️ 实验最终效果
![实验最终效果](./task5/image.png)

---

### 📊 实验拟合评估
![实验拟合评估](./task5/result.png)

# 人体动作捕捉与SMPL模型 (mocap and SMPL model)

# mocap:人体动作捕捉
目标：通过传感器（可以是RGB摄像头，深度摄像头或者光学标记，3D扫描仪）对人体的一段时间的某个动作进行捕捉，从而可以实现三维的人物建模。
## 形式：
1.通过人体关节点表示，如Fig 1的第二张图所示。
2.通过人体铰链结构表示（其中1和2我们都称之为人体姿态估计问题，其问题的关键在于对人体关节点的位置的预测，这里的位置可以是图片上的2D像素位置，也可能是3D空间位置）
3.通过人体3D mesh表示，但是这个mesh并不包括人体的细节，比如表情，手势，脚踝的转动等。
4.通过人体细节3D mesh表示，这个mesh包含着人体的脸部表情，手势和脚踝转动等细节。 （3和4的方法考虑了人体的形态特征，比如胖瘦，高矮等，因此表征能力更加丰富。）

如果不对3D模型进行约束，那么单纯的单视角图像将会存在2D到3D投影的歧义性

## 因此引入常见的先验知识：
1.可以对人体关节旋转的极限进行建模
收集了很多瑜伽表演者的人体极限姿态的角度数据集。
Akhter I, Black M J. Pose-conditioned joint angle limits for 3D human pose reconstruction[C]//Proceedings of the IEEE conference on computer vision and pattern recognition. 2015: 1446-1455.

2.收集大规模正常人体活动的3D 扫描数据（效果不错）
AMASS：集成了15个人体真实的3D扫描数据集，并且用SMPL人体模型进行标准参数化的大型数据库
HMR模型、VIBE模型

3.在HMR模型中，作者通过在大规模的真实人体mesh数据上进行对抗学习，从而引入了人体姿态正则

## SMPL模型：Skinned Multi-Person Linear (SMPL) Model
Skinned表示这个模型不仅仅是骨架点了，其是有蒙皮的，其蒙皮通过3D mesh表示
Multi-person表示的是这个模型是可以表示不同的人的，是通用的
Linear就很容易理解了，其表示人体的不同姿态或者不同升高，胖瘦（我们都称之为形状shape）是一个线性的过程，是可以控制和解释的

## SMPL模型是一个统计模型，其通过两种类型的统计参数对人体进行描述
1.形状参数（shape parameters）：一组形状参数有着10个维度的数值去描述一个人的形状，每一个维度的值都可以解释为人体形状的某个指标，比如高矮，胖瘦等。
2.姿态参数（pose parameters）：一组姿态参数有24*3维度的数字，去描述人体的动作姿态。
其中24：24个定义好的人体关节点
3：该节点针对于其父节点的旋转角度的轴角式表达

## 对模型形状姿态的mesh控制：
1.通过手动去拉扯模型mesh的控制点以产生mesh的形变
2.通过Blend Shape，也就是混合成形的方法，通过不同参数的线性组合去“融合”成一个mesh。


## 从SMPL模型合成数字人体模型的三大阶段：
1.基于形状的混合成形：
在基模版（或者称之为统计上的均值模版）+通过参数B（描述我们需要的人体姿态和这个基本姿态的偏移量）
N = 6890个端点(vertex)表示整个mesh，每个端点有着(,y,z)三个空间坐标，我们要注意和骨骼点joint 区分。
此处得到的人体mesh的姿态称之为静默姿态(rest pose，也可以称之为T-pose)，因为其并没有考虑姿态参数的影响。

2.基于姿态的混合成形
人体具体的姿态对于mesh局部形状也会有细微的影响。姿态参数0也会在一定程度影响到静默姿态的mesh形状。

3.蒙皮（过程）：当人体骨骼点运动时，由端点(vertex)组成的“皮肤”将会随着骨骼点(joint)的运动而变化
简化性表达：就是距离某个具体的骨骼点越近的端点，其跟随着该骨骼点旋转/平移等变化的影响越强。


姿态表示：24个关节用75个数控制（23个关节各3个轴角式参数 + 根节点6个朝向/位移参数）。
计算转换：轴角式⟶通过Rodrigues公式转成旋转矩阵（3个数变9个）。
修正机制：预学习207个模板（23×9），记录每个关节旋转时mesh该怎么变形。
最终效果：计算当前姿势 - 默认姿势的旋转差，用模板加权生成顶点偏移，让肌肉皮肤变形更自然。



